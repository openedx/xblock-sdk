sudo: false

language: python

addons:
    firefox: latest

python:
    - "2.7"

env:
  - TOXENV=py27-django18
  - TOXENV=py27-django110
  - TOXENV=py27-django111

matrix:
  include:
    - python: 2.7
      env: TOXENV=quality

branches:
    only:
      - master
cache:
    directories:
        - $HOME/.cache/pip

before_script:
    - "export DISPLAY=:99.0"
    - "sh -e /etc/init.d/xvfb start"
    - "sleep 3" # give xvfb some time to start

before_install:
    - "pip install -U pip"

install:
    - "pip install tox-travis"

script:
    - tox

after_success:
    - "pip install coveralls"
    - "coveralls"
